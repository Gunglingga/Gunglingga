{"ast":null,"code":"var _jsxFileName = \"D:\\\\TUGAS AKHIR\\\\ticketingBlockchain\\\\frontend-tiket\\\\src\\\\components\\\\TicketList.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { ethers } from 'ethers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction TicketList({\n  contract\n}) {\n  _s();\n  const [tickets, setTickets] = useState([]);\n  const [errorMessage, setErrorMessage] = useState('');\n  useEffect(() => {\n    const loadTickets = async () => {\n      if (!contract) {\n        console.error(\"Contract is not defined.\");\n        setErrorMessage(\"Kontrak tidak terdefinisi.\");\n        return;\n      }\n      console.log(\"Contract address:\", contract.address); // Debug log untuk alamat kontrak\n\n      try {\n        const ticketCount = await contract.getTicketCount(); // Mengambil jumlah tiket yang terdaftar\n        console.log(\"Total tiket:\", ticketCount.toString());\n        const ticketsArray = [];\n\n        // Mengambil detail setiap tiket berdasarkan indeksnya\n        for (let i = 0; i < ticketCount; i++) {\n          const ticket = await contract.getTicketDetails(i + 1); // Memanggil detail tiket, index mulai dari 1\n\n          // Debug log untuk melihat detail tiket\n          console.log(`Ticket ${i + 1}:`, ticket);\n\n          // Membangun objek tiket sesuai struktur yang dikembalikan oleh kontrak\n          const ticketObj = {\n            id: i + 1,\n            eventName: ticket.eventName,\n            eventOrganizer: ticket.eventOrganizer,\n            posterUrl: ticket.posterUrl,\n            ticketImageUrl: ticket.ticketImageUrl,\n            price: ethers.utils.formatEther(ticket.price),\n            // Mengonversi harga ke format ETH\n            expiryTimestamp: ticket.expiryTimestamp.toNumber(),\n            // Konversi dari BigNumber ke Number\n            eventDate: ticket.eventDate.toNumber(),\n            // Konversi dari BigNumber ke Number\n            sold: ticket.sold,\n            // Apakah tiket sudah terjual\n            downloaded: ticket.downloaded // Apakah tiket sudah diunduh\n          };\n          ticketsArray.push(ticketObj);\n        }\n        setTickets(ticketsArray); // Menyimpan array tiket ke state\n      } catch (error) {\n        var _error$data;\n        console.error(\"Error memuat tiket:\", error);\n        setErrorMessage('Gagal memuat tiket: ' + (((_error$data = error.data) === null || _error$data === void 0 ? void 0 : _error$data.message) || error.message || 'Silakan coba lagi.'));\n      }\n    };\n    loadTickets(); // Panggil fungsi loadTickets\n  }, [contract]); // Efek akan dijalankan ulang ketika kontrak berubah\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [tickets.length === 0 ? /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Belum Ada Tiket, Silahkan Buat Penjualan.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: tickets.map(ticket => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [ticket.eventName, \" - \", ticket.eventOrganizer]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Harga: \", ticket.price, \" ETH\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Batas Waktu: \", new Date(ticket.expiryTimestamp * 1000).toLocaleString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Tanggal Acara: \", new Date(ticket.eventDate * 1000).toLocaleString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Terjual: \", ticket.sold ? \"Ya\" : \"Tidak\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Diunduh: \", ticket.downloaded ? \"Ya\" : \"Tidak\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this), ticket.posterUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: ticket.posterUrl,\n            alt: \"Poster Event\",\n            style: {\n              width: '100%',\n              height: 'auto'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }, this)]\n      }, ticket.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 24\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(TicketList, \"q7Mw+KQUibCJ3UMXwjWfXMqB58M=\");\n_c = TicketList;\nexport default TicketList;\nvar _c;\n$RefreshReg$(_c, \"TicketList\");","map":{"version":3,"names":["useEffect","useState","ethers","jsxDEV","_jsxDEV","TicketList","contract","_s","tickets","setTickets","errorMessage","setErrorMessage","loadTickets","console","error","log","address","ticketCount","getTicketCount","toString","ticketsArray","i","ticket","getTicketDetails","ticketObj","id","eventName","eventOrganizer","posterUrl","ticketImageUrl","price","utils","formatEther","expiryTimestamp","toNumber","eventDate","sold","downloaded","push","_error$data","data","message","children","length","fileName","_jsxFileName","lineNumber","columnNumber","map","Date","toLocaleString","src","alt","style","width","height","className","_c","$RefreshReg$"],"sources":["D:/TUGAS AKHIR/ticketingBlockchain/frontend-tiket/src/components/TicketList.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { ethers } from 'ethers'; \r\n\r\nfunction TicketList({ contract }) {\r\n  const [tickets, setTickets] = useState([]);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loadTickets = async () => {\r\n      if (!contract) {\r\n        console.error(\"Contract is not defined.\");\r\n        setErrorMessage(\"Kontrak tidak terdefinisi.\");\r\n        return;\r\n      }\r\n\r\n      console.log(\"Contract address:\", contract.address); // Debug log untuk alamat kontrak\r\n\r\n      try {\r\n        const ticketCount = await contract.getTicketCount(); // Mengambil jumlah tiket yang terdaftar\r\n        console.log(\"Total tiket:\", ticketCount.toString());\r\n\r\n        const ticketsArray = [];\r\n\r\n        // Mengambil detail setiap tiket berdasarkan indeksnya\r\n        for (let i = 0; i < ticketCount; i++) {\r\n          const ticket = await contract.getTicketDetails(i + 1); // Memanggil detail tiket, index mulai dari 1\r\n          \r\n          // Debug log untuk melihat detail tiket\r\n          console.log(`Ticket ${i + 1}:`, ticket);\r\n\r\n          // Membangun objek tiket sesuai struktur yang dikembalikan oleh kontrak\r\n          const ticketObj = {\r\n            id: i + 1,\r\n            eventName: ticket.eventName,\r\n            eventOrganizer: ticket.eventOrganizer,\r\n            posterUrl: ticket.posterUrl,\r\n            ticketImageUrl: ticket.ticketImageUrl,\r\n            price: ethers.utils.formatEther(ticket.price), // Mengonversi harga ke format ETH\r\n            expiryTimestamp: ticket.expiryTimestamp.toNumber(), // Konversi dari BigNumber ke Number\r\n            eventDate: ticket.eventDate.toNumber(), // Konversi dari BigNumber ke Number\r\n            sold: ticket.sold, // Apakah tiket sudah terjual\r\n            downloaded: ticket.downloaded, // Apakah tiket sudah diunduh\r\n          };\r\n\r\n          ticketsArray.push(ticketObj);\r\n        }\r\n\r\n        setTickets(ticketsArray); // Menyimpan array tiket ke state\r\n      } catch (error) {\r\n        console.error(\"Error memuat tiket:\", error);\r\n        setErrorMessage('Gagal memuat tiket: ' + (error.data?.message || error.message || 'Silakan coba lagi.'));\r\n      }\r\n    };\r\n\r\n    loadTickets(); // Panggil fungsi loadTickets\r\n  }, [contract]); // Efek akan dijalankan ulang ketika kontrak berubah\r\n\r\n  return (\r\n    <div>\r\n      {tickets.length === 0 ? (\r\n        <h3>Belum Ada Tiket, Silahkan Buat Penjualan.</h3>\r\n      ) : (\r\n        <ul>\r\n          {tickets.map(ticket => (\r\n            <li key={ticket.id}>\r\n              <h4>{ticket.eventName} - {ticket.eventOrganizer}</h4>\r\n              <p>Harga: {ticket.price} ETH</p>\r\n              <p>Batas Waktu: {new Date(ticket.expiryTimestamp * 1000).toLocaleString()}</p>\r\n              <p>Tanggal Acara: {new Date(ticket.eventDate * 1000).toLocaleString()}</p>\r\n              <p>Terjual: {ticket.sold ? \"Ya\" : \"Tidak\"}</p>\r\n              <p>Diunduh: {ticket.downloaded ? \"Ya\" : \"Tidak\"}</p>\r\n              {ticket.posterUrl && (\r\n                <div>\r\n                  <img src={ticket.posterUrl} alt=\"Poster Event\" style={{ width: '100%', height: 'auto' }} />\r\n                </div>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {errorMessage && <p className=\"error\">{errorMessage}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TicketList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}